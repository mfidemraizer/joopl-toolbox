"use strict";(function(){$namespace.register("joopl.collections",function(){var n=this;this.declareClass("IndexedList",{inherits:n.ObservableList,ctor:function(t){this.base.ctor(t);this._.indexes=new n.List;this.changed.addEventListener(this.list_changed.bind(this))},members:{get indexes(){return this._.indexes},add:function(n){this.base.add(n)},addIndex:function(t){if(t.isTypeOf(n.Index))this.indexes.add(t);else throw new $global.joopl.ArgumentException({argName:"index",reason:"Given object is not an index"});},decideIndexOrSequence:function(t,i,r){var c;if(t instanceof Function)return r();var f={},o=null,u=Object.keys(t);if(typeof t[u[0]]!="function")f[u[0]]=t[u[0]],o=t[u[1]];else if(typeof t[u[1]]=="function")f=t[u[1]],o=t[u[0]];else throw new Error(new $global.joopl.ArgumentException({argName:"predicateFuncOrIndexedSearch",reason:"The indexed search requires a property selector"}));var l=u[0],e=this._.indexes.single(function(n){return n.property==l}),h=new n.List,s=null;for(c in f[e.property])s={},s[e.property]=f[e.property][c],h.addRange(i(e,s,o));return h},where:function(n){var t=this;return this.decideIndexOrSequence(n,function(n,t,i){return n.where(t,i)},function(){return t.base.where(n)})},list_changed:function(n){n.source._.indexes.forEach(function(t){t.onDataChange(n)})}}})})})()
