<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>jOOPL Toolbox | joopl.collections.List test</title>
    <link rel="stylesheet" href="/resources/qunit.css">
</head>
<body>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>

    <link rel="stylesheet" type="text/css" href="qunit.css" />
    <script src="qunit.js" type="text/javascript"></script>
    <script src="esprima.js" type="text/javascript"></script>
    <script src="joopl.min.js" type="text/javascript"></script>
    <script src="joopl.toolbox.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        "use strict";

        (function (undefined) {
            test("Create list and add items. Make an indexed search and check that the result contains the expected item", function () {
                $namespace.using("joopl.collections", function() {
                    var list = new this.IndexedList();

                    list.addIndex(new this.OrderedStringIndex({ source: this, unique: true, property: function(item) { return item.text; } }));
                    list.add({ text: "hello" });
                    list.add({ text: "halo" })
                    list.add({ text: "world" });
                    list.add({ text: "!" });

                    var result = list.where({ text: "hel", predicate: function(item) { return item.indexOf(this) == 0 || item == "halo"; } });

                    ok(result.indexOf("hello") > -1, "Item found");
                    ok(result.indexOf("halo") > -1, "Item found");
                });
            });
        })(undefined);
    </script>
</body>
</html>
